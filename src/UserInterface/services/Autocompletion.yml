parameters:
    autocompletion.largeProviderResultLimit: 15
    autocompletion.finalSuggestionsResultLimit: 50

services:
    defaultAutocompletionPrefixBoundaryTokenRetriever:
        class: PhpIntegrator\Autocompletion\DefaultAutocompletionPrefixBoundaryTokenRetriever

    docblockAutocompletionPrefixBoundaryTokenRetriever:
        class: PhpIntegrator\Autocompletion\DocblockAutocompletionPrefixBoundaryTokenRetriever
        arguments:
            - '@defaultAutocompletionPrefixBoundaryTokenRetriever'

    defaultAutocompletionPrefixDeterminer:
        class: PhpIntegrator\Autocompletion\AutocompletionPrefixDeterminer
        arguments:
            - '@defaultAutocompletionPrefixBoundaryTokenRetriever'

    docblockAutocompletionPrefixDeterminer:
        class: PhpIntegrator\Autocompletion\AutocompletionPrefixDeterminer
        arguments:
            - '@docblockAutocompletionPrefixBoundaryTokenRetriever'

    levenshteinApproximateStringMatcher:
        class: PhpIntegrator\Autocompletion\ApproximateStringMatching\LevenshteinApproximateStringMatcher

    autocompletionApproximateStringMatcher:
        alias: levenshteinApproximateStringMatcher

    approximateStringMatchingBestStringApproximationDeterminer:
        class: PhpIntegrator\Autocompletion\ApproximateStringMatching\ApproximateStringMatchingBestStringApproximationDeterminer
        arguments:
            - '@autocompletionApproximateStringMatcher'

    bestStringApproximationDeterminer:
        alias: approximateStringMatchingBestStringApproximationDeterminer

    autocompletionSuggestionTypeFormatter:
        class: PhpIntegrator\Autocompletion\AutocompletionSuggestionTypeFormatter

    functionAutocompletionSuggestionLabelCreator:
        class: PhpIntegrator\Autocompletion\FunctionAutocompletionSuggestionLabelCreator

    functionAutocompletionSuggestionParanthesesNecessityEvaluator:
        class: PhpIntegrator\Autocompletion\FunctionAutocompletionSuggestionParanthesesNecessityEvaluator

    keywordAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\KeywordAutocompletionProvider

    keywordAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\KeywordAutocompletionApplicabilityChecker

    applicabilityCheckingKeywordAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@keywordAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@keywordAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    docblockTagAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\DocblockTagAutocompletionProvider
        arguments:
            - '@docblockAutocompletionPrefixDeterminer'

    docblockTagAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\DocblockTagAutocompletionApplicabilityChecker

    applicabilityCheckingDocblockTagAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@docblockTagAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@docblockTagAutocompletionApplicabilityChecker'
            - '@docblockAutocompletionPrefixDeterminer'

    superglobalAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\SuperglobalAutocompletionProvider

    applicabilityCheckingSuperglobalAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@superglobalAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@localVariableAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    classAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ClasslikeAutocompletionProvider
        arguments:
            - '@classFilteringClasslikeListProvider'
            - '@useStatementInsertionCreator'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '%autocompletion.largeProviderResultLimit%'

    classAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\ClassAutocompletionApplicabilityChecker

    applicabilityCheckingClassAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@classAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@classAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    interfaceAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ClasslikeAutocompletionProvider
        arguments:
            - '@interfaceFilteringClasslikeListProvider'
            - '@useStatementInsertionCreator'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '%autocompletion.largeProviderResultLimit%'

    interfaceAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\ClassAutocompletionApplicabilityChecker

    applicabilityCheckingInterfaceAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@interfaceAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@interfaceAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    traitAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ClasslikeAutocompletionProvider
        arguments:
            - '@traitFilteringClasslikeListProvider'
            - '@useStatementInsertionCreator'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '%autocompletion.largeProviderResultLimit%'

    traitAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\ClassAutocompletionApplicabilityChecker

    applicabilityCheckingTraitAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@traitAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@traitAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    docblockAnnotationAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ClasslikeAutocompletionProvider
        arguments:
            - '@annotationFilteringClasslikeListProvider'
            - '@useStatementInsertionCreator'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '%autocompletion.largeProviderResultLimit%'

    applicabilityCheckingDocblockAnnotationAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@docblockAnnotationAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@docblockTagAutocompletionApplicabilityChecker'
            - '@docblockAutocompletionPrefixDeterminer'

    namespaceAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\NamespaceAutocompletionProvider
        arguments:
            - '@namespaceListProvider'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '%autocompletion.largeProviderResultLimit%'

    namespaceAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\NamespaceAutocompletionApplicabilityChecker

    applicabilityCheckingNamespaceAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@namespaceAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@namespaceAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    functionAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\FunctionAutocompletionProvider
        arguments:
            - '@functionListProvider'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '@functionAutocompletionSuggestionLabelCreator'
            - '@functionAutocompletionSuggestionParanthesesNecessityEvaluator'
            - '@autocompletionSuggestionTypeFormatter'
            - '%autocompletion.largeProviderResultLimit%'

    functionAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\FunctionAutocompletionApplicabilityChecker

    applicabilityCheckingFunctionAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@functionAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@functionAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    constantAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ConstantAutocompletionProvider
        arguments:
            - '@constantListProvider'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '@autocompletionSuggestionTypeFormatter'
            - '%autocompletion.largeProviderResultLimit%'

    constantAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\ConstantAutocompletionApplicabilityChecker

    applicabilityCheckingConstantAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@constantAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@constantAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    nonStaticMethodAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\NonStaticMethodAutocompletionProvider
        arguments:
            - '@expressionTypeDeducer'
            - '@classlikeInfoBuilder'
            - '@functionAutocompletionSuggestionLabelCreator'
            - '@functionAutocompletionSuggestionParanthesesNecessityEvaluator'
            - '@autocompletionSuggestionTypeFormatter'

    nonStaticMethodAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\NonStaticMethodAutocompletionApplicabilityChecker

    applicabilityCheckingNonStaticMethodAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@nonStaticMethodAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@nonStaticMethodAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    staticMethodAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\StaticMethodAutocompletionProvider
        arguments:
            - '@expressionTypeDeducer'
            - '@classlikeInfoBuilder'
            - '@functionAutocompletionSuggestionLabelCreator'
            - '@functionAutocompletionSuggestionParanthesesNecessityEvaluator'
            - '@autocompletionSuggestionTypeFormatter'

    staticMethodAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\StaticMethodAutocompletionApplicabilityChecker

    applicabilityCheckingStaticMethodAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@staticMethodAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@staticMethodAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    nonStaticPropertyAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\NonStaticPropertyAutocompletionProvider
        arguments:
            - '@expressionTypeDeducer'
            - '@classlikeInfoBuilder'
            - '@autocompletionSuggestionTypeFormatter'

    nonStaticPropertyAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\NonStaticPropertyAutocompletionApplicabilityChecker

    applicabilityCheckingNonStaticPropertyAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@nonStaticPropertyAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@nonStaticPropertyAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    staticPropertyAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\StaticPropertyAutocompletionProvider
        arguments:
            - '@expressionTypeDeducer'
            - '@classlikeInfoBuilder'
            - '@autocompletionSuggestionTypeFormatter'

    staticPropertyAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\StaticPropertyAutocompletionApplicabilityChecker

    applicabilityCheckingStaticPropertyAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@staticPropertyAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@staticPropertyAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    classConstantAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ClassConstantAutocompletionProvider
        arguments:
            - '@expressionTypeDeducer'
            - '@classlikeInfoBuilder'
            - '@autocompletionSuggestionTypeFormatter'

    classConstantAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\ClassConstantAutocompletionApplicabilityChecker

    applicabilityCheckingClassConstantAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@classConstantAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@classConstantAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    localVariableAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\LocalVariableAutocompletionProvider
        arguments:
            - '@variableScanner'
            - '@parser'
            - '@autocompletionSuggestionTypeFormatter'

    localVariableAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\LocalVariableAutocompletionApplicabilityChecker

    applicabilityCheckingLocalVariableAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@localVariableAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@localVariableAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    parameterNameAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ParameterNameAutocompletionProvider
        arguments:
            - '@nodeAtOffsetLocator'

    parameterNameAutocompletionApplicabilityChecker:
        class: PhpIntegrator\Autocompletion\ParameterNameAutocompletionApplicabilityChecker

    applicabilityCheckingParameterNameAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\ApplicabilityCheckingAutocompletionProvider
        arguments:
            - '@parameterNameAutocompletionProvider'
            - '@nodeAtOffsetLocator'
            - '@parameterNameAutocompletionApplicabilityChecker'
            - '@defaultAutocompletionPrefixDeterminer'

    aggregatingAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\AggregatingAutocompletionProvider
        arguments:
            - '@applicabilityCheckingKeywordAutocompletionProvider'
            - '@applicabilityCheckingDocblockTagAutocompletionProvider'
            - '@applicabilityCheckingDocblockAnnotationAutocompletionProvider'
            - '@applicabilityCheckingSuperglobalAutocompletionProvider'
            - '@applicabilityCheckingClassAutocompletionProvider'
            - '@applicabilityCheckingInterfaceAutocompletionProvider'
            - '@applicabilityCheckingTraitAutocompletionProvider'
            - '@applicabilityCheckingFunctionAutocompletionProvider'
            - '@applicabilityCheckingConstantAutocompletionProvider'
            - '@applicabilityCheckingNamespaceAutocompletionProvider'
            - '@applicabilityCheckingNonStaticMethodAutocompletionProvider'
            - '@applicabilityCheckingStaticMethodAutocompletionProvider'
            - '@applicabilityCheckingNonStaticPropertyAutocompletionProvider'
            - '@applicabilityCheckingStaticPropertyAutocompletionProvider'
            - '@applicabilityCheckingClassConstantAutocompletionProvider'
            - '@applicabilityCheckingLocalVariableAutocompletionProvider'
            - '@applicabilityCheckingParameterNameAutocompletionProvider'

    fuzzyMatchingAutocompletionProvider:
        class: PhpIntegrator\Autocompletion\FuzzyMatchingAutocompletionProvider
        arguments:
            - '@aggregatingAutocompletionProvider'
            - '@defaultAutocompletionPrefixDeterminer'
            - '@bestStringApproximationDeterminer'
            - '%autocompletion.finalSuggestionsResultLimit%'

    autocompletionProvider:
        alias: fuzzyMatchingAutocompletionProvider
